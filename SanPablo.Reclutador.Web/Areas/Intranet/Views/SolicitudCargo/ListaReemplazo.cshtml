@{
    ViewBag.Title = "Listado Solicitudes Ampliacion";
}
@section Head{
}

@section Scripts{

<script type="text/javascript">
    $("#txtfechainicio").datepicker();
    $("#txtfechafin").datepicker();

    jQuery("#grdList").jqGrid({
        url: '@Url.Action("ListaSolicitudAmpliacion", "SolicitudCargo")',
        datatype: 'json',
        mtype: 'POST',
        colNames: ['Código', 'Cargo', 'Dependencia', 'Departamento', 'Área', 'Vacan.', 'Postu.', 'Pre-Sel.', 'Eval.', 'Selec.', 'Inicio', 'Cierre', 'Responsable', 'Nom.Responsable', 'Publicado', 'Etapa', 'Estado'],
        colModel: [
                { name: 'HabilitaDeshabilita', index: 'HabilitaDeshabilita', align: 'center', sortable: false, width: 50, formatter: HabilitarFormatter },
                { name: 'Codigo', index: 'Codigo', align: 'center', width: 50 },
                { name: 'Cargo', index: 'Cargo', align: 'left' },
                { name: 'Dependencia', index: 'Dependencia', align: 'left', width: 160 },
                { name: 'Departamento', index: 'Departamento', align: 'left', width: 100 },
                { name: 'Area', index: 'Area', align: 'left', width: 100 },
                { name: 'Vacantes', index: 'Vacantes', align: 'right', width: 60 },
                { name: 'Postulantes', index: 'Postulantes', align: 'right', width: 60 },
                { name: 'PreSeleccionados', index: 'PreSeleccionados', align: 'right', width: 60 },
                { name: 'Evaluados', index: 'Evaluados', align: 'right', width: 60 },
                { name: 'Seleccionados', index: 'Seleccionados', align: 'right', width: 60 },
                { name: 'Inicio', index: 'Inicio', align: 'left', width: 50 },
                { name: 'Cierre', index: 'Cierre', align: 'left', width: 50 },
                { name: 'Responsable', index: 'Responsable', align: 'left', width: 50 },
                { name: 'NombreResponsable', index: 'NombreResponsable', align: 'left', width: 150 },
                { name: 'Publicado', index: 'Publicado', align: 'left', width: 50 },
                { name: 'Etapa', index: 'Etapa', align: 'center', width: 50 }
        ],
        pager: '#grdPager',
        height: 420,
        width: 930,
        rowNum: 10,
        rowList: [10, 20, 30],
        viewrecords: true,
        hidegrid: false,
        altRows: true,
        shrinkToFit: false
    });

    function RadioFormatter(cellvalue, options, rowObject) {
        var strRdo = '<input type ="radio" name = "codigo">';
        return strRdo;
    }

    function HabilitarFormatter(cellvalue, options, rowObject) {
        var imgPath = '@Url.Content("~/Content/images/")';
        var archivo = 'enabled.png';
        var title = "Habilitar"
        if (rowObject[14] == "Activo") {
            archivo = 'enabled.png';
            var title = "Habilitar"
        } else {
            archivo = 'enabled.png';
            var title = "Habilitar"
        }

        var strImg = '<img src="' + imgPath + archivo + '" title="' + title + '" alt="' + title + '">';
        return strImg;
    }


    //-----------grilla anidada
    jQuery("#sg2").jqGrid({
        url: '@Url.Action("ListaSolicitudAmpliacion", "SolicitudCargo")',
        datatype: "xml",
        height: 190,
        colNames: [ 'Cargo', 'Dependencia', 'Departamento', 'Área', 'Vacan.', 'Postu.', 'Pre-Sel.', 'Eval.', 'Selec.', 'Inicio', 'Cierre', 'Responsable', 'Nom.Responsable', 'Etapa', 'Estado'],
        colModel: [
                { name: 'HabilitaDeshabilita', index: 'HabilitaDeshabilita', align: 'center', sortable: false, width: 50, formatter: HabilitarFormatter },
                { name: 'Cargo', index: 'Cargo', align: 'left' },
                { name: 'Dependencia', index: 'Dependencia', align: 'left', width: 160 },
                { name: 'Departamento', index: 'Departamento', align: 'left', width: 100 },
                { name: 'Area', index: 'Area', align: 'left', width: 100 },
                { name: 'Vacantes', index: 'Vacantes', align: 'right', width: 60 },
                { name: 'Postulantes', index: 'Postulantes', align: 'right', width: 60 },
                { name: 'PreSeleccionados', index: 'PreSeleccionados', align: 'right', width: 60 },
                { name: 'Evaluados', index: 'Evaluados', align: 'right', width: 60 },
                { name: 'Seleccionados', index: 'Seleccionados', align: 'right', width: 60 },
                { name: 'Inicio', index: 'Inicio', align: 'left', width: 50 },
                { name: 'Cierre', index: 'Cierre', align: 'left', width: 50 },
                { name: 'Responsable', index: 'Responsable', align: 'left', width: 50 },
                { name: 'NombreResponsable', index: 'NombreResponsable', align: 'left', width: 150 },
                { name: 'Etapa', index: 'Etapa', align: 'center', width: 50 }
        ],
        rowNum: 8,
        rowList: [8, 10, 20, 30],
        pager: '#psg2',
        sortname: 'id',
        viewrecords: true,
        sortorder: "desc",
        multiselect: false,
        subGrid: true,
        caption: "Custom Icons in Subgrid",
        // define the icons in subgrid
        subGridOptions: {
            "plusicon": "ui-icon-triangle-1-e",
            "minusicon": "ui-icon-triangle-1-s",
            "openicon": "ui-icon-arrowreturn-1-e",
            //expand all rows on load
            "expandOnLoad": true
        },
        subGridRowExpanded: function (subgrid_id, row_id) {
            var subgrid_table_id, pager_id;
            subgrid_table_id = subgrid_id + "_t";
            pager_id = "p_" + subgrid_table_id;
            $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "' class='scroll'></table><div id='" + pager_id + "' class='scroll'></div>");
            jQuery("#" + subgrid_table_id).jqGrid({
                //url: "subgrid.php?q=2&id=" + row_id,
                datatype: "xml",
                colNames: ['Código', 'Cargo', 'Dependencia', 'Departamento', 'Área', 'Vacan.', 'Postu.', 'Pre-Sel.', 'Eval.', 'Selec.', 'Inicio', 'Cierre', 'Responsable', 'Nom.Responsable', 'Publicado', 'Etapa', 'Estado'],
                colModel: [
                        { name: 'HabilitaDeshabilita', index: 'HabilitaDeshabilita', align: 'center', sortable: false, width: 50, formatter: HabilitarFormatter },
                        { name: 'Codigo', index: 'Codigo', align: 'center', width: 50 },
                        { name: 'Cargo', index: 'Cargo', align: 'left' },
                        { name: 'Dependencia', index: 'Dependencia', align: 'left', width: 160 },
                        { name: 'Departamento', index: 'Departamento', align: 'left', width: 100 },
                        { name: 'Area', index: 'Area', align: 'left', width: 100 },
                        { name: 'Vacantes', index: 'Vacantes', align: 'right', width: 60 },
                        { name: 'Postulantes', index: 'Postulantes', align: 'right', width: 60 },
                        { name: 'PreSeleccionados', index: 'PreSeleccionados', align: 'right', width: 60 },
                        { name: 'Evaluados', index: 'Evaluados', align: 'right', width: 60 },
                        { name: 'Seleccionados', index: 'Seleccionados', align: 'right', width: 60 },
                        { name: 'Inicio', index: 'Inicio', align: 'left', width: 50 },
                        { name: 'Cierre', index: 'Cierre', align: 'left', width: 50 },
                        { name: 'Responsable', index: 'Responsable', align: 'left', width: 50 },
                        { name: 'NombreResponsable', index: 'NombreResponsable', align: 'left', width: 150 },
                        { name: 'Publicado', index: 'Publicado', align: 'left', width: 50 },
                        { name: 'Etapa', index: 'Etapa', align: 'center', width: 50 }
                ],
                rowNum: 20,
                pager: pager_id,
                sortname: 'num',
                sortorder: "asc",
                height: '100%'
            });
            jQuery("#" + subgrid_table_id).jqGrid('navGrid', "#" + pager_id, { edit: false, add: false, del: false })
        }
    });
    jQuery("#sg2").jqGrid('navGrid', '#psg2', { add: false, edit: false, del: false });

    //------------fin de grilla anidada
</script>
}
<div class="row">
    <div class="span12">
        <div class="widget-box">
            <div class="widget-title">
                <h5>Listado Solicitud de Reemplazo de Cargo</h5>
            </div>
            <form class="formulario-busqueda">
                <div class="formulario-fila">
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Cargo</label>
                            <div class="controles">
                                <select id="selectCargo">
                                    <option>Seleccionar</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="selectError">Fecha</label>
                            <div class="controles">
                                <input id="txtfechainicio" type="text" class="input-small" placeholder=" Inicial"/>
                                <input id="txtfechafin" type="text" class="input-small" placeholder=" Final"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="formulario-fila">
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Dependencia</label>
                            <div class="controles">
                                <select>
                                    <option>Seleccionar</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Departamento</label>
                            <div class="controles">
                                <select>
                                    <option>Seleccionar</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="formulario-fila">
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Área</label>
                            <div class="controles">
                                <select>
                                    <option>Seleccionar</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Etapa</label>
                            <div class="controles">
                                <select>
                                    <option>Seleccionar</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="formulario-fila">
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Responsable</label>
                            <div class="controles">
                                <select>
                                    <option>Seleccionar</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>                    
                    <div class="span5">
                        <div class="">
                            <label class="control-label" for="inputSuccess">Estado</label>
                            <div class="controles">
                                <select id="selectEstado">
                                    <option>Activo</option>                                    
                                    <option>Inactivo</option>                                    
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="formulario-accion offset9">
                    <button type="submit" class="btn btn-info"><i class="icon-search icon-white"></i> Buscar</button>
                    <button type="reset" class="btn"><i class="icon-trash"></i> Limpiar</button>
                </div>
            </form>
            <div class="tabla-datos">
                <table id="grdList">
                </table>
                <div id="grdPager">
                </div>
            </div>
            <div>
                <h5>GRILLA ANIDADA</h5>
                <table id="sg1"></table>
                <div id="psg1"></div>
            </div>
            <div class="form-actions">
                <a class="btn btn-info" href="@Url.Action("PostulantesPorRequerimiento", "SolicitudCargo")"><i class="icon-eye-open icon-white"></i> Ranking</a>
                <a class="btn btn-info" href="@Url.Action("PostulantesPreSeleccionados", "SolicitudCargo")"><i class="icon-tasks  icon-white"></i> Pre-select</a>
                <a class="btn btn-info" href="@Url.Action("CrearReemplazo", "SolicitudCargo")"><i class="icon-zoom-in icon-white"></i> Consultar</a>
                <a class="btn btn-info" href="@Url.Action("CrearReemplazo", "SolicitudCargo")"><i class="icon-plus icon-white"></i> Nuevo</a>
                <a class="btn btn-info" href="@Url.Action("CrearReemplazo", "SolicitudCargo")"><i class="icon-pencil icon-white"></i> Editar</a>
                <button type="reset" class="btn btn-info"><i class="icon-check icon-white"></i> Activar / Desactivar</button>
                <button type="submit" class="btn btn-danger"><i class="icon-remove icon-white"></i> Eliminar</button>
            </div>
        </div>
    </div>
</div>
